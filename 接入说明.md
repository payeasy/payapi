接入说明
====
|||
|----|----|
|测试服务器地址|140.143.239.199:9099|
|测试接入ID|000000000000000000000000|
|测试接入密匙|c7b8b9b8-7c60-489a-b853-9bbb8a79e2f5|
|支付DEMO|[http://140.143.239.199:9099/pay/index](http://140.143.239.199:9099/pay/index)|
|取款DEMO|[http://140.143.239.199:9099/pay/withdraw](http://140.143.239.199:9099/pay/withdraw)|
**正式服务器地址及接入ID、密匙请联系商务获取**

渠道说明
====
|渠道|支付宝扫码|支付宝WAP|支付宝原生调用|微信扫码|取款|备注|
|----|----|----|----|----|----|----|
|CHANNEL1(Beta)|√|√|√|√|直接到账|需联系商务配置收款手机|
|CHANNEL2|√|√|√|×|API取款|固定金额|
|CHANNEL3|×|√|×|×|每日打款|任意金额，单笔3000，每日100万|

支付方式
====
|名称|值|
|----|----|
|支付宝|1|
|微信|2|
|银行卡|3|

状态值
====
|值|含义|
|----|----|
|200|充值/提款成功|
|202|正在确认充值/内部转账|
|403|拒绝提款/充值|

请求支付(POST)
====
http://网站地址/api/pay?channel=支付渠道&sign=签名
请求格式(json):
````
{
  customerId:接入ID
  payType:支付方式(int)
  orderId:您的订单号
  amount:支付金额,单位分(int)
  notifyUrl:支付成功后异步通知接口
  returnUrl:(可选)用户前端支付成功后跳转的页面
  product:(可选)用户购买的商品
  userId:(可选)用户ID
  userName:(可选)用户昵称
}
````
返回格式(json):
````
{
  code:状态值(int)
  data:{
    orderId:我方平台订单ID
    customerOrderId:您的订单号
    status:订单状态值(int)
    url:需要跳转到该url进行支付
    nativeUrl:原生跳转
  }
  message:异常或提示消息
}
````
支付成功异步通知(POST):您的通知地址?sign=签名  
**请做好重复回调验证**
````
{
  orderId:我方平台订单ID
  customerOrderId:您的订单号
  amount:支付金额,单位分(int)
  status:订单状态值(int)
}
````

支付查询(POST)
====
http://网站地址/api/checkpay
请求格式（json）
````
{
  orderid:我方平台订单ID
}
````
返回格式（json）
````
{
  code:状态值(int)
  message:异常或提示消息
}
````

----
请求提款(POST)
====
http://网站地址/api/withdraw?channel=支付接口&sign=签名
请求格式(json):
````
{
  customerId:接入ID
  orderId:您的取款订单号
  payType:支付方式(int)
  bank:银行名称(支付宝、微信可不填)
  account:账号
  realName:真实姓名
  amount:提款金额,单位分(int)
  notifyUrl:提款成功后异步通知接口
}
````
返回格式(json):
````
{
  code:状态值(int)
  data:{
    orderId:我方平台订单ID
    customerOrderId:您的提款订单号
    status:订单状态值(int)
  }
  message:异常或提示消息
}
````

提款成功异步通知(POST):您的通知地址?sign=签名  
**请做好重复回调验证**
````
{
  orderId:我方平台订单ID
  customerOrderId:您的订单号
  status:订单状态值(int)
}
````

提款查询(POST)
====
http://网站地址/api/checkwithdraw
请求格式（json）
````
{
  orderid:我方平台订单ID
}
````
返回格式（json）
````
{
  code:状态值(int)
  message:异常或提示消息
}
````

签名算法
====
sign = md5(json + 接入密匙);

支付宝原生跳转方式
==== 
iOS:
````
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"nativeUrl"] options:@{} completionHandler:nil];
````  
Android:
````
Intent intent = Intent.parseUri("nativeUrl",Intent.URI_INTENT_SCHEME); intent.addCategory(Intent.CATEGORY_BROWSABLE); intent.setComponent(null);
startActivity(intent);
````
